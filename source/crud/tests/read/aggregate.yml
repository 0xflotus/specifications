data:
    - {_id: 1, x: 11}
    - {_id: 2, x: 22}
    - {_id: 3, x: 33}

tests:
    -
        description: "Aggregate without $out"
        operation:
            name: aggregate
            arguments:
                pipeline: [
                    {$sort: {x: 1}}
                ],
                batchSize: 2

        outcome:
            results:
                - {_id: 1, x: 11}
                - {_id: 2, x: 22}
                - {_id: 3, x: 33}
    -
        description: "Aggregate with $out"
        operation:
            name: aggregate
            arguments:
                pipeline: [
                    {$sort: {x: 1}},
                    {$out: "other_test_collection"}
                ],
                batchSize: 2

        outcome:
            results:
                - {_id: 1, x: 11}
                - {_id: 2, x: 22}
                - {_id: 3, x: 33}